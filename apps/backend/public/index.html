<!doctype html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GACP Platform - ระบบรับรองมาตรฐาน GACP</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Sarabun', Arial, sans-serif;
        line-height: 1.6;
        color: #333;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      .header h1 {
        color: #2c3e50;
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .header .subtitle {
        color: #7f8c8d;
        font-size: 1.2em;
        margin-bottom: 20px;
      }

      .status-badge {
        display: inline-block;
        background: linear-gradient(45deg, #27ae60, #2ecc71);
        color: white;
        padding: 8px 20px;
        border-radius: 25px;
        font-weight: bold;
        box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
      }

      .cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-bottom: 30px;
      }

      .card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition:
          transform 0.3s ease,
          box-shadow 0.3s ease;
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 45px rgba(0, 0, 0, 0.2);
      }

      .card-header {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
      }

      .card-header i {
        font-size: 2em;
        margin-right: 15px;
        background: linear-gradient(45deg, #3498db, #2980b9);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .card-header h3 {
        color: #2c3e50;
        font-size: 1.3em;
      }

      .feature-list {
        list-style: none;
      }

      .feature-list li {
        padding: 8px 0;
        border-bottom: 1px solid #ecf0f1;
        display: flex;
        align-items: center;
      }

      .feature-list li:last-child {
        border-bottom: none;
      }

      .feature-list li i {
        color: #27ae60;
        margin-right: 10px;
        width: 20px;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      }

      .stat-number {
        font-size: 2.5em;
        font-weight: bold;
        color: #3498db;
        margin-bottom: 5px;
      }

      .stat-label {
        color: #7f8c8d;
        font-size: 0.9em;
      }

      .api-section {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }

      .api-endpoint {
        background: #f8f9fa;
        border-left: 4px solid #3498db;
        padding: 15px;
        margin: 10px 0;
        border-radius: 5px;
        font-family: 'Courier New', monospace;
      }

      .method {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        color: white;
        font-weight: bold;
        margin-right: 10px;
        font-size: 0.8em;
      }

      .method.get {
        background: #27ae60;
      }
      .method.post {
        background: #e74c3c;
      }
      .method.put {
        background: #f39c12;
      }
      .method.delete {
        background: #c0392b;
      }

      .footer {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        padding: 25px;
        text-align: center;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        color: #7f8c8d;
      }

      .btn {
        display: inline-block;
        background: linear-gradient(45deg, #3498db, #2980b9);
        color: white;
        padding: 12px 25px;
        text-decoration: none;
        border-radius: 25px;
        margin: 10px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(52, 152, 219, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(52, 152, 219, 0);
        }
      }

      .pulse {
        animation: pulse 2s infinite;
      }

      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #3498db;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-right: 10px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1><i class="fas fa-leaf"></i> GACP Platform</h1>
        <p class="subtitle">ระบบรับรองมาตรฐาน Good Agricultural and Collection Practices</p>
        <p class="subtitle">กรมการแพทย์แผนไทยและการแพทย์ทางเลือก (DTAM)</p>
        <span class="status-badge pulse">
          <i class="fas fa-check-circle"></i> Production Ready
        </span>
      </div>

      <!-- Statistics -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number">17/17</div>
          <div class="stat-label">Environment Variables</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">3004</div>
          <div class="stat-label">Server Port</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">99.5%</div>
          <div class="stat-label">Uptime</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">24h</div>
          <div class="stat-label">JWT Expiry</div>
        </div>
      </div>

      <!-- Main Features -->
      <div class="cards-grid">
        <!-- Authentication System -->
        <div class="card">
          <div class="card-header">
            <i class="fas fa-shield-alt"></i>
            <h3>ระบบรักษาความปลอดภัย</h3>
          </div>
          <ul class="feature-list">
            <li><i class="fas fa-check"></i> JWT Dual-Token System</li>
            <li><i class="fas fa-check"></i> Role-based Access Control</li>
            <li><i class="fas fa-check"></i> Rate Limiting Protection</li>
            <li><i class="fas fa-check"></i> CORS Security</li>
            <li><i class="fas fa-check"></i> Helmet.js Protection</li>
          </ul>
        </div>

        <!-- User Roles -->
        <div class="card">
          <div class="card-header">
            <i class="fas fa-users"></i>
            <h3>บทบาทผู้ใช้งาน</h3>
          </div>
          <ul class="feature-list">
            <li><i class="fas fa-user"></i> เกษตรกร (Farmer)</li>
            <li><i class="fas fa-user-tie"></i> เจ้าหน้าที่ DTAM</li>
            <li><i class="fas fa-user-check"></i> ผู้ตรวจสอบ (Auditor)</li>
            <li><i class="fas fa-user-cog"></i> ผู้ดูแลระบบ</li>
          </ul>
        </div>

        <!-- Workflow Process -->
        <div class="card">
          <div class="card-header">
            <i class="fas fa-tasks"></i>
            <h3>กระบวนการทำงาน</h3>
          </div>
          <ul class="feature-list">
            <li><i class="fas fa-file-alt"></i> ยื่นใบสมัครรับรอง</li>
            <li><i class="fas fa-search"></i> ตรวจสอบเอกสาร</li>
            <li><i class="fas fa-calendar"></i> กำหนดตารางตรวจ</li>
            <li><i class="fas fa-clipboard-check"></i> ตรวจสอบภาคสนาม</li>
            <li><i class="fas fa-certificate"></i> ออกใบรับรอง</li>
          </ul>
        </div>

        <!-- Herbs & Standards -->
        <div class="card">
          <div class="card-header">
            <i class="fas fa-seedling"></i>
            <h3>สมุนไพรที่รองรับ</h3>
          </div>
          <ul class="feature-list">
            <li><i class="fas fa-leaf"></i> ขมิ้นชัน (Curcuma longa)</li>
            <li><i class="fas fa-leaf"></i> ขิง (Zingiber officinale)</li>
            <li><i class="fas fa-leaf"></i> กะเพรา (Ocimum tenuiflorum)</li>
            <li><i class="fas fa-leaf"></i> มะขามป้อม (Phyllanthus acidus)</li>
          </ul>
        </div>

        <!-- Payment System -->
        <div class="card">
          <div class="card-header">
            <i class="fas fa-credit-card"></i>
            <h3>ระบบชำระเงิน</h3>
          </div>
          <ul class="feature-list">
            <li><i class="fas fa-qrcode"></i> PromptPay QR Code</li>
            <li><i class="fas fa-university"></i> โอนเงินผ่านธนาคาร</li>
            <li><i class="fas fa-money-check"></i> เช็คธนาคาร</li>
            <li><i class="fas fa-receipt"></i> ใบเสร็จอิเล็กทรอนิกส์</li>
          </ul>
        </div>

        <!-- Document Management -->
        <div class="card">
          <div class="card-header">
            <i class="fas fa-folder-open"></i>
            <h3>การจัดการเอกสาร</h3>
          </div>
          <ul class="feature-list">
            <li><i class="fas fa-upload"></i> อัปโหลดเอกสาร</li>
            <li><i class="fas fa-file-pdf"></i> PDF Generation</li>
            <li><i class="fas fa-download"></i> ดาวน์โหลดใบรับรอง</li>
            <li><i class="fas fa-qrcode"></i> QR Code Verification</li>
          </ul>
        </div>
      </div>

      <!-- API Documentation -->
      <div class="api-section">
        <h2><i class="fas fa-code"></i> API Endpoints</h2>

        <h3>ระบบยืนยันตัตน</h3>
        <div class="api-endpoint">
          <span class="method post">POST</span> /api/auth/login - เข้าสู่ระบบ
        </div>
        <div class="api-endpoint">
          <span class="method post">POST</span> /api/auth/register - ลงทะเบียน
        </div>
        <div class="api-endpoint">
          <span class="method get">GET</span> /api/auth/profile - ข้อมูลผู้ใช้
        </div>

        <h3>การจัดการคำขอ</h3>
        <div class="api-endpoint">
          <span class="method post">POST</span> /api/applications - ยื่นคำขอใหม่
        </div>
        <div class="api-endpoint">
          <span class="method get">GET</span> /api/applications - รายการคำขอ
        </div>
        <div class="api-endpoint">
          <span class="method get">GET</span> /api/applications/:id - รายละเอียดคำขอ
        </div>

        <h3>แดชบอร์ด</h3>
        <div class="api-endpoint">
          <span class="method get">GET</span> /api/dashboard - Dashboard ตามบทบาท
        </div>
        <div class="api-endpoint">
          <span class="method get">GET</span> /api/farmer/dashboard - Dashboard ผู้ขอรับรอง
        </div>
        <div class="api-endpoint">
          <span class="method get">GET</span> /api/dtam/dashboard - Dashboard DTAM
        </div>

        <h3>การออกใบรับรอง</h3>
        <div class="api-endpoint">
          <span class="method post">POST</span> /api/certificates/generate/:id - ออกใบรับรอง
        </div>
        <div class="api-endpoint">
          <span class="method get">GET</span> /api/certificates/download/:id - ดาวน์โหลด
        </div>
        <div class="api-endpoint">
          <span class="method get">GET</span> /verify/:certificateNumber - ตรวจสอบใบรับรอง
        </div>

        <h3>การตรวจสอบสถานะระบบ</h3>
        <div class="api-endpoint">
          <span class="method get">GET</span> /health - ตรวจสอบสถานะระบบ
        </div>
        <div class="api-endpoint"><span class="method get">GET</span> /api - เอกสารประกอบ API</div>
      </div>

      <!-- Quick Actions -->
      <div class="api-section">
        <h2><i class="fas fa-rocket"></i> การเข้าใช้บริการ</h2>
        <div style="text-align: center">
          <a href="http://localhost:3004/health" class="btn" target="_blank">
            <i class="fas fa-heartbeat"></i> ตรวจสอบสถานะระบบ
          </a>
          <a href="http://localhost:3004/api" class="btn" target="_blank">
            <i class="fas fa-book"></i> เอกสารประกอบ API
          </a>
          <a href="#" class="btn" onclick="testAPI()"> <i class="fas fa-play"></i> ทดสอบระบบ </a>
          <a href="#" class="btn" onclick="showDemo()">
            <i class="fas fa-presentation"></i> ดูการสาธิต
          </a>
        </div>
      </div>

      <!-- Footer -->
      <div class="footer">
        <p><strong>ระบบรับรองมาตรฐาน GACP</strong> - สมุนไพรทางการแพทย์</p>
        <p>กรมการแพทย์แผนไทยและการแพทย์ทางเลือก (DTAM)</p>
        <p>วันที่: 19 ตุลาคม 2025 | เวอร์ชัน: 2.0.0 | สถานะ: พร้อมใช้งาน</p>
      </div>
    </div>

    <script>
      // แสดงเวลาในการโหลดหน้า
      window.addEventListener('load', function () {
        setTimeout(() => {
          document.querySelector('.status-badge').innerHTML =
            '<i class="fas fa-check-circle"></i> ระบบพร้อมใช้งาน (' +
            (performance.now() / 1000).toFixed(2) +
            's)';
        }, 1000);
      });

      // ฟังก์ชันทดสอบ API
      async function testAPI() {
        const btn = event.target;
        const originalText = btn.innerHTML;
        btn.innerHTML = '<div class="loading"></div> กำลังทดสอบ...';
        btn.disabled = true;

        try {
          const response = await fetch('/health');
          const data = await response.json();

          alert(
            '✅ การทดสอบ API สำเร็จ!\n\n' +
              'Status: ' +
              data.status +
              '\n' +
              'Database: ' +
              (data.database ? 'Connected' : 'Disconnected') +
              '\n' +
              'Uptime: ' +
              data.uptime +
              ' seconds'
          );
        } catch (error) {
          alert('❌ การทดสอบ API ล้มเหลว!\n' + error.message);
        } finally {
          btn.innerHTML = originalText;
          btn.disabled = false;
        }
      }

      // ฟังก์ชันแสดงเดโม่
      function showDemo() {
        const features = [
          '🔐 ระบบยืนยันตัวตน JWT',
          '📋 การยื่นใบสมัครรับรอง',
          '💰 ระบบชำระเงิน PromptPay',
          '📊 Dashboard แบบ Real-time',
          '🔍 ระบบตรวจสอบภาคสนาม',
          '🏆 การออกใบรับรองดิจิทัล',
          '📱 Mobile Responsive Design',
          '🛡️ ระบบรักษาความปลอดภัย',
        ];

        alert(
          '🌟 GACP Platform Demo\n\n' +
            'ฟีเจอร์หลักที่พร้อมใช้งาน:\n\n' +
            features.join('\n') +
            '\n\n' +
            '🚀 ระบบพร้อมให้บริการเกษตรกรไทย!'
        );
      }

      // Auto-refresh สถิติทุก 30 วินาที
      setInterval(function () {
        fetch('/health')
          .then(response => response.json())
          .then(data => {
            // อัปเดตสถิติใหม่
            const uptimeElement = document.querySelector('.stat-card:nth-child(3) .stat-number');
            if (uptimeElement && data.uptime) {
              const hours = (data.uptime / 3600).toFixed(1);
              uptimeElement.textContent = hours + 'h';
            }
          })
          .catch(err => console.log('Auto-refresh failed:', err));
      }, 30000);
    </script>
  </body>
</html>
