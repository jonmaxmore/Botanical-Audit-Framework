# ğŸŒ¿ à¸ à¸²à¸à¸£à¸§à¸¡à¸˜à¸¸à¸£à¸à¸´à¸ˆà¹à¸¥à¸°à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸šà¸š GACP Platform

## ğŸ“‹ à¸ à¸²à¸à¸£à¸§à¸¡à¸˜à¸¸à¸£à¸à¸´à¸ˆ

### à¸§à¸´à¸ªà¸±à¸¢à¸—à¸±à¸¨à¸™à¹Œ
à¹à¸à¸¥à¸•à¸Ÿà¸­à¸£à¹Œà¸¡à¸šà¸£à¸´à¸«à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸à¸±à¸à¸Šà¸²à¸—à¸²à¸‡à¸à¸²à¸£à¹à¸à¸—à¸¢à¹Œà¹à¸¥à¸°à¸à¸·à¸Šà¸ªà¸¡à¸¸à¸™à¹„à¸à¸£à¸„à¸£à¸šà¸§à¸‡à¸ˆà¸£ à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸à¸©à¸•à¸£à¸à¸£à¹à¸¥à¸°à¸«à¸™à¹ˆà¸§à¸¢à¸‡à¸²à¸™à¸£à¸²à¸Šà¸à¸²à¸£ à¸à¸£à¹‰à¸­à¸¡à¸£à¸­à¸‡à¸£à¸±à¸šà¸à¸²à¸£à¸‚à¸¢à¸²à¸¢à¹€à¸›à¹‡à¸™ **SaaS/Subscription Model** à¹ƒà¸™à¸­à¸™à¸²à¸„à¸•

---

## ğŸ—ï¸ à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸šà¸š

### Build 1: Farmer Portal (à¹€à¸à¸©à¸•à¸£à¸à¸£)
**URL:** `farmer.gacp.go.th`

### Build 2: Government Portal (à¸à¸£à¸¡à¸à¸²à¸£à¹à¸à¸—à¸¢à¹Œà¹à¸œà¸™à¹„à¸—à¸¢à¸¯)
**URL:** `admin.gacp.go.th`

---

## ğŸ¯ Core Services (Phase 1 - à¹€à¸›à¸´à¸”à¹ƒà¸«à¹‰à¸šà¸£à¸´à¸à¸²à¸£à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸)

### 1. à¸£à¸°à¸šà¸šà¸ªà¸¡à¸²à¸Šà¸´à¸ (Member Management) âœ…
**à¸ªà¸–à¸²à¸™à¸°:** Core Service - à¹€à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸•à¸¥à¸­à¸”

**à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ:**
- à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¹€à¸à¸©à¸•à¸£à¸à¸£
- à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§
- à¸£à¸°à¸šà¸š Authentication à¹à¸¢à¸ 2 à¸£à¸°à¸šà¸š

**à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸›à¸´à¸”à¹„à¸”à¹‰:** à¹€à¸›à¹‡à¸™à¸£à¸°à¸šà¸šà¸à¸·à¹‰à¸™à¸à¸²à¸™

---

### 2. à¸£à¸°à¸šà¸šà¸¢à¸·à¹ˆà¸™à¹€à¸­à¸à¸ªà¸²à¸£à¸‚à¸­à¸­à¸™à¸¸à¸à¸²à¸• (License Application) âœ…
**à¸ªà¸–à¸²à¸™à¸°:** Core Service - à¹€à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸•à¸¥à¸­à¸”

**à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ:**
- à¸¢à¸·à¹ˆà¸™à¸„à¸³à¸‚à¸­à¹ƒà¸šà¸­à¸™à¸¸à¸à¸²à¸•à¸›à¸¥à¸¹à¸à¸à¸±à¸à¸Šà¸²
- à¸•à¸´à¸”à¸•à¸²à¸¡à¸ªà¸–à¸²à¸™à¸°à¸„à¸³à¸‚à¸­
- à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´/à¸›à¸à¸´à¹€à¸ªà¸˜à¹‚à¸”à¸¢à¹€à¸ˆà¹‰à¸²à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ

**à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸›à¸´à¸”à¹„à¸”à¹‰:** à¹€à¸›à¹‡à¸™à¸£à¸°à¸šà¸šà¸«à¸¥à¸±à¸à¸‚à¸­à¸‡à¹à¸à¸¥à¸•à¸Ÿà¸­à¸£à¹Œà¸¡

---

### 3. à¸£à¸°à¸šà¸šà¸•à¸´à¸”à¸•à¸²à¸¡à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸š (Traceability) ğŸ”„
**à¸ªà¸–à¸²à¸™à¸°:** Optional Service - à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸›à¸´à¸”/à¸›à¸´à¸”à¹„à¸”à¹‰

**à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ:**
- à¸•à¸´à¸”à¸•à¸²à¸¡à¸ªà¸´à¸™à¸„à¹‰à¸²à¸”à¹‰à¸§à¸¢ Batch Code
- à¸ªà¹à¸à¸™ QR Code
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸²à¸˜à¸²à¸£à¸“à¸°

**à¹à¸œà¸™à¸­à¸™à¸²à¸„à¸•:**
- à¹à¸¢à¸à¹€à¸›à¹‡à¸™ Microservice
- à¹€à¸ªà¸™à¸­à¹€à¸›à¹‡à¸™à¸šà¸£à¸´à¸à¸²à¸£à¹€à¸ªà¸£à¸´à¸¡ (Add-on)
- à¸£à¸­à¸‡à¸£à¸±à¸š Subscription à¹à¸šà¸š Pay-per-scan

**Database:** `track-trace` collection
**API Prefix:** `/api/track-trace/*`

---

### 4. à¸£à¸°à¸šà¸šà¸šà¸£à¸´à¸«à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¸Ÿà¸²à¸£à¹Œà¸¡ (Farm Management) ğŸ”„
**à¸ªà¸–à¸²à¸™à¸°:** Optional Service - à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸›à¸´à¸”/à¸›à¸´à¸”à¹„à¸”à¹‰

**à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ:**
- à¸ˆà¸±à¸”à¸à¸²à¸£ Cultivation Cycles
- à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸´à¸ˆà¸à¸£à¸£à¸¡ SOP
- à¸­à¸­à¸ QR Code à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸´à¸™à¸„à¹‰à¸²
- Dashboard à¹€à¸à¸©à¸•à¸£à¸à¸£

**à¹à¸œà¸™à¸­à¸™à¸²à¸„à¸•:**
- à¹à¸¢à¸à¹€à¸›à¹‡à¸™ Standalone Service
- à¹€à¸ªà¸™à¸­à¹€à¸›à¹‡à¸™ Premium Package
- à¸£à¸­à¸‡à¸£à¸±à¸š IoT Integration (Add-on)

**Database:** `cultivationcycles`, `harvestrecords`, `qualitytests`
**API Prefix:** `/api/farm/*`

---

### 5. à¸£à¸°à¸šà¸šà¹à¸šà¸šà¸ªà¸­à¸šà¸–à¸²à¸¡ (Survey System) ğŸ”„
**à¸ªà¸–à¸²à¸™à¸°:** Optional Service - à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸›à¸´à¸”/à¸›à¸´à¸”à¹„à¸”à¹‰

**à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ:**
- Survey Wizard 4 à¸ à¸¹à¸¡à¸´à¸ à¸²à¸„
- à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ à¸¹à¸¡à¸´à¸ à¸²à¸„
- à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¸ à¸¹à¸¡à¸´à¸ à¸²à¸„

**à¹à¸œà¸™à¸­à¸™à¸²à¸„à¸•:**
- à¹à¸¢à¸à¹€à¸›à¹‡à¸™ Analytics Service
- à¹€à¸ªà¸™à¸­à¹€à¸›à¹‡à¸™ Research Package
- API à¸ªà¸³à¸«à¸£à¸±à¸š Third-party

**Database:** `surveyresponses`, `surveytemplates`
**API Prefix:** `/api/surveys/*`

---

### 6. à¸£à¸°à¸šà¸šà¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¸¡à¸²à¸•à¸£à¸à¸²à¸™ (Standard Comparison) ğŸ”„
**à¸ªà¸–à¸²à¸™à¸°:** Optional Service - à¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸›à¸´à¸”/à¸›à¸´à¸”à¹„à¸”à¹‰

**à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ:**
- à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š GACP vs WHO/FDA/ASEAN
- à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸¡à¸‡à¸§à¸”à¸‚à¸­à¸‡à¸¡à¸²à¸•à¸£à¸à¸²à¸™

**à¹à¸œà¸™à¸­à¸™à¸²à¸„à¸•:**
- à¹à¸¢à¸à¹€à¸›à¹‡à¸™ Compliance Service
- à¹€à¸ªà¸™à¸­à¹€à¸›à¹‡à¸™ Consulting Package

**Database:** `standards`, `parameters`, `standardvalues`
**API Prefix:** `/api/standards/*`

---

## ğŸ›ï¸ Feature Toggle System (à¸•à¹‰à¸­à¸‡à¸à¸±à¸’à¸™à¸²)

### à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£

```javascript
// à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡ Feature Configuration
{
  "services": {
    "member": { "enabled": true, "canDisable": false },
    "license": { "enabled": true, "canDisable": false },
    "traceability": { "enabled": true, "canDisable": true },
    "farmManagement": { "enabled": true, "canDisable": true },
    "survey": { "enabled": false, "canDisable": true },
    "standardComparison": { "enabled": false, "canDisable": true }
  }
}
```

### à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸—à¸µà¹ˆà¹à¸™à¸°à¸™à¸³

#### 1. Feature Toggle Database Schema
```javascript
// Collection: feature_toggles
{
  _id: ObjectId,
  serviceId: "traceability",
  serviceName: "à¸£à¸°à¸šà¸šà¸•à¸´à¸”à¸•à¸²à¸¡à¸¢à¹‰à¸­à¸™à¸à¸¥à¸±à¸š",
  enabled: true,
  canDisable: true,
  category: "optional",
  pricing: {
    tier: "premium",
    monthlyPrice: 5000,
    perUsagePrice: 10 // per scan
  },
  dependencies: [],
  routes: ["/api/track-trace/*"],
  metadata: {
    createdAt: Date,
    updatedAt: Date,
    lastToggledBy: "admin_user_id"
  }
}
```

#### 2. Middleware à¸ªà¸³à¸«à¸£à¸±à¸šà¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Feature
```javascript
// middleware/feature-toggle.js
const checkFeatureEnabled = (serviceId) => {
  return async (req, res, next) => {
    const feature = await FeatureToggle.findOne({ serviceId });
    
    if (!feature || !feature.enabled) {
      return res.status(403).json({
        success: false,
        message: 'This service is currently disabled',
        serviceId,
        contactAdmin: true
      });
    }
    
    next();
  };
};
```

#### 3. Admin Panel UI
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service Management                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  âœ… Member Management      [Core]       â”‚
â”‚  âœ… License Application    [Core]       â”‚
â”‚  ğŸ”„ Traceability          [Toggle] âœ“    â”‚
â”‚  ğŸ”„ Farm Management       [Toggle] âœ“    â”‚
â”‚  ğŸ”„ Survey System         [Toggle] âœ—    â”‚
â”‚  ğŸ”„ Standard Comparison   [Toggle] âœ—    â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Service Dependency Map

```
Core Services (Always On)
â”œâ”€â”€ Member Management
â””â”€â”€ License Application
    
Optional Services (Can Toggle)
â”œâ”€â”€ Traceability
â”‚   â””â”€â”€ Depends on: Member
â”œâ”€â”€ Farm Management
â”‚   â”œâ”€â”€ Depends on: Member
â”‚   â””â”€â”€ Integrates with: Traceability
â”œâ”€â”€ Survey System
â”‚   â””â”€â”€ Depends on: Member
â””â”€â”€ Standard Comparison
    â””â”€â”€ Standalone
```

---

## ğŸš€ Roadmap: SaaS/Subscription Model

### Phase 1: Current (Core Services)
- âœ… Member Management
- âœ… License Application
- âœ… Basic Farm Management
- âœ… Basic Traceability

### Phase 2: Feature Toggle Implementation (à¸•à¹‰à¸­à¸‡à¸à¸±à¸’à¸™à¸²)
- ğŸ”¨ à¸ªà¸£à¹‰à¸²à¸‡ Feature Toggle Database
- ğŸ”¨ à¸à¸±à¸’à¸™à¸² Middleware
- ğŸ”¨ à¸ªà¸£à¹‰à¸²à¸‡ Admin UI à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸›à¸´à¸”/à¸›à¸´à¸” Services
- ğŸ”¨ à¸—à¸”à¸ªà¸­à¸šà¸à¸²à¸£à¹€à¸›à¸´à¸”/à¸›à¸´à¸”à¸£à¸°à¸šà¸š

### Phase 3: Service Separation
- ğŸ“¦ à¹à¸¢à¸ Traceability à¹€à¸›à¹‡à¸™ Microservice
- ğŸ“¦ à¹à¸¢à¸ Farm Management à¹€à¸›à¹‡à¸™ Standalone
- ğŸ“¦ à¹à¸¢à¸ Survey System
- ğŸ“¦ à¹à¸¢à¸ Standard Comparison

### Phase 4: Subscription Tiers
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Free Tier                               â”‚
â”‚  - Member Management                     â”‚
â”‚  - License Application (Basic)           â”‚
â”‚  - 10 Products/month                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Professional Tier (5,000 THB/month)    â”‚
â”‚  - All Free features                     â”‚
â”‚  - Farm Management                       â”‚
â”‚  - Traceability (100 scans/month)       â”‚
â”‚  - Survey System                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Enterprise Tier (15,000 THB/month)     â”‚
â”‚  - All Professional features             â”‚
â”‚  - Unlimited Traceability                â”‚
â”‚  - Standard Comparison                   â”‚
â”‚  - IoT Integration                       â”‚
â”‚  - API Access                            â”‚
â”‚  - Priority Support                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ Implementation Plan

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 1: à¸ªà¸£à¹‰à¸²à¸‡ Feature Toggle System
1. à¸ªà¸£à¹‰à¸²à¸‡ Database Schema
2. à¸ªà¸£à¹‰à¸²à¸‡ Middleware
3. à¸ªà¸£à¹‰à¸²à¸‡ Admin UI
4. à¸—à¸”à¸ªà¸­à¸šà¸à¸²à¸£à¹€à¸›à¸´à¸”/à¸›à¸´à¸”

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 2: Refactor Services
1. à¹à¸¢à¸ Routes à¸•à¸²à¸¡ Service
2. à¹à¸¢à¸ Database Collections
3. à¸ªà¸£à¹‰à¸²à¸‡ Service Registry
4. à¸—à¸”à¸ªà¸­à¸š Independence

### à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆ 3: Implement Subscription
1. à¸ªà¸£à¹‰à¸²à¸‡ Subscription Database
2. à¸ªà¸£à¹‰à¸²à¸‡ Payment Gateway Integration
3. à¸ªà¸£à¹‰à¸²à¸‡ Usage Tracking
4. à¸ªà¸£à¹‰à¸²à¸‡ Billing System

---

## ğŸ“ à¸ªà¸£à¸¸à¸›

### à¸ªà¸–à¸²à¸™à¸°à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™
- âœ… à¸£à¸°à¸šà¸šà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰ 100%
- âœ… à¹‚à¸„à¹‰à¸”à¹€à¸›à¹‡à¸™ Modular Architecture
- âœ… à¸à¸£à¹‰à¸­à¸¡à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¹à¸¢à¸ Services

### à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸±à¸’à¸™à¸²
- ğŸ”¨ Feature Toggle System
- ğŸ”¨ Admin Panel à¸ªà¸³à¸«à¸£à¸±à¸šà¸ˆà¸±à¸”à¸à¸²à¸£ Services
- ğŸ”¨ Subscription Management
- ğŸ”¨ Usage Tracking & Billing

### à¸‚à¹‰à¸­à¸”à¸µà¸‚à¸­à¸‡à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™
- âœ… Services à¹à¸¢à¸à¸à¸±à¸™à¸Šà¸±à¸”à¹€à¸ˆà¸™
- âœ… Database Collections à¹à¸¢à¸à¸•à¸²à¸¡ Service
- âœ… API Routes à¸¡à¸µ Prefix à¸Šà¸±à¸”à¹€à¸ˆà¸™
- âœ… à¸‡à¹ˆà¸²à¸¢à¸•à¹ˆà¸­à¸à¸²à¸£à¹à¸¢à¸à¹€à¸›à¹‡à¸™ Microservices

---

**à¸ªà¸£à¸¸à¸›:** à¸£à¸°à¸šà¸šà¸à¸£à¹‰à¸­à¸¡à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸à¸±à¸’à¸™à¸²à¹€à¸›à¹‡à¸™ SaaS Platform à¹à¸¥à¹‰à¸§! ğŸš€
