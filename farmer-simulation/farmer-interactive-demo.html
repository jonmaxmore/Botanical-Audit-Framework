<!doctype html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GACP - ระบบยื่นขอรับรอง GAP สำหรับเกษตรกร</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
      body {
        font-family: 'Sarabun', sans-serif;
      }
      .animate-bounce-slow {
        animation: bounce 3s infinite;
      }
      .fade-in {
        animation: fadeIn 0.5s ease-in;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .progress-bar {
        transition: width 0.3s ease;
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-green-50 to-blue-50 min-h-screen">
    <div x-data="farmerApp()" class="container mx-auto px-4 py-8">
      <!-- Header -->
      <div class="bg-white rounded-xl shadow-lg p-6 mb-8 card-hover">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <div class="bg-green-500 rounded-full p-3">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
            </div>
            <div>
              <h1 class="text-2xl font-bold text-gray-800">ระบบยื่นขอรับรอง GACP</h1>
              <p class="text-gray-600">ระบบจำลองสำหรับเกษตรกร - กรอกข้อมูลเอง</p>
            </div>
          </div>
          <div class="text-right">
            <div class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">
              สถานะ: เกษตรกร
            </div>
            <p class="text-sm text-gray-500 mt-1">นาย <span x-text="farmer.name"></span></p>
          </div>
        </div>
      </div>

      <!-- Progress Indicator -->
      <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
        <h2 class="text-lg font-semibold mb-4">ความคืบหน้าการกรอกข้อมูล</h2>
        <div class="flex items-center space-x-4 mb-4">
          <div class="flex-1">
            <div class="bg-gray-200 rounded-full h-3">
              <div
                class="bg-gradient-to-r from-green-400 to-green-600 h-3 rounded-full progress-bar"
                :style="`width: ${progress}%`"
              ></div>
            </div>
          </div>
          <span class="text-sm font-medium text-gray-700" x-text="`${progress}%`"></span>
        </div>
        <div class="grid grid-cols-7 gap-2">
          <div class="text-center">
            <div
              class="w-8 h-8 rounded-full mx-auto mb-1"
              :class="currentStep >= 1 ? 'bg-green-500 text-white' : 'bg-gray-300'"
              class="flex items-center justify-center text-sm font-bold"
            >
              1
            </div>
            <span class="text-xs text-gray-600">ข้อมูลส่วนตัว</span>
          </div>
          <div class="text-center">
            <div
              class="w-8 h-8 rounded-full mx-auto mb-1"
              :class="currentStep >= 2 ? 'bg-green-500 text-white' : 'bg-gray-300'"
              class="flex items-center justify-center text-sm font-bold"
            >
              2
            </div>
            <span class="text-xs text-gray-600">ข้อมูลไร่</span>
          </div>
          <div class="text-center">
            <div
              class="w-8 h-8 rounded-full mx-auto mb-1"
              :class="currentStep >= 3 ? 'bg-green-500 text-white' : 'bg-gray-300'"
              class="flex items-center justify-center text-sm font-bold"
            >
              3
            </div>
            <span class="text-xs text-gray-600">ชำระเงินเฟส 1</span>
          </div>
          <div class="text-center">
            <div
              class="w-8 h-8 rounded-full mx-auto mb-1"
              :class="currentStep >= 4 ? 'bg-green-500 text-white' : 'bg-gray-300'"
              class="flex items-center justify-center text-sm font-bold"
            >
              4
            </div>
            <span class="text-xs text-gray-600">อัปโหลดเอกสาร</span>
          </div>
          <div class="text-center">
            <div
              class="w-8 h-8 rounded-full mx-auto mb-1"
              :class="currentStep >= 5 ? 'bg-green-500 text-white' : 'bg-gray-300'"
              class="flex items-center justify-center text-sm font-bold"
            >
              5
            </div>
            <span class="text-xs text-gray-600">ชำระเงินเฟส 2</span>
          </div>
          <div class="text-center">
            <div
              class="w-8 h-8 rounded-full mx-auto mb-1"
              :class="currentStep >= 6 ? 'bg-green-500 text-white' : 'bg-gray-300'"
              class="flex items-center justify-center text-sm font-bold"
            >
              6
            </div>
            <span class="text-xs text-gray-600">ตรวจสอบข้อมูล</span>
          </div>
          <div class="text-center">
            <div
              class="w-8 h-8 rounded-full mx-auto mb-1"
              :class="currentStep >= 7 ? 'bg-green-500 text-white' : 'bg-gray-300'"
              class="flex items-center justify-center text-sm font-bold"
            >
              7
            </div>
            <span class="text-xs text-gray-600">เสร็จสิ้น</span>
          </div>
        </div>
      </div>

      <!-- Step 1: Personal Information -->
      <div x-show="currentStep === 1" class="fade-in">
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6 card-hover">
          <h2 class="text-xl font-semibold mb-6 flex items-center">
            <svg
              class="w-6 h-6 text-green-500 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
              />
            </svg>
            ข้อมูลส่วนตัวของเกษตรกร
          </h2>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">ชื่อ-นามสกุล *</label>
              <input
                type="text"
                x-model="farmer.name"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
                placeholder="เช่น นายสมชาย ใจดี"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">เลขบัตรประชาชน *</label>
              <input
                type="text"
                x-model="farmer.idCard"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
                placeholder="1-2345-67890-12-3"
                maxlength="17"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">วันเกิด *</label>
              <input
                type="date"
                x-model="farmer.birthDate"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">เบอร์โทรศัพท์ *</label>
              <input
                type="tel"
                x-model="farmer.phone"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
                placeholder="08X-XXX-XXXX"
              />
            </div>
            <div class="md:col-span-2">
              <label class="block text-sm font-medium text-gray-700 mb-2">ที่อยู่ *</label>
              <textarea
                x-model="farmer.address"
                rows="3"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
                placeholder="เช่น 123 หมู่ 4 ตำบลบางใหญ่ อำเภอบางใหญ่ จังหวัดนนทบุรี 11140"
              ></textarea>
            </div>
          </div>

          <div class="flex justify-end mt-8">
            <button
              @click="nextStep()"
              :disabled="!isStep1Valid()"
              class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"
            >
              ถัดไป
            </button>
          </div>
        </div>
      </div>

      <!-- Step 2: Farm Information -->
      <div x-show="currentStep === 2" class="fade-in">
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6 card-hover">
          <h2 class="text-xl font-semibold mb-6 flex items-center">
            <svg
              class="w-6 h-6 text-green-500 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>
            ข้อมูลไร่และการเกษตร
          </h2>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">ชื่อไร่/แปลง *</label>
              <input
                type="text"
                x-model="farm.name"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
                placeholder="เช่น ไร่สมชายออร์แกนิค"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">พื้นที่ (ไร่) *</label>
              <input
                type="number"
                x-model="farm.area"
                step="0.1"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
                placeholder="เช่น 5.5"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">ประเภทพืชที่ปลูก *</label>
              <select
                x-model="farm.cropType"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
              >
                <option value="">เลือกประเภทพืช</option>
                <option value="rice">ข้าว</option>
                <option value="vegetables">ผักใบเขียว</option>
                <option value="fruits">ผลไม้</option>
                <option value="herbs">สมุนไพร</option>
                <option value="others">อื่น ๆ</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">ระบบการปลูก *</label>
              <select
                x-model="farm.farmingSystem"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
              >
                <option value="">เลือกระบบการปลูก</option>
                <option value="organic">เกษตรอินทรีย์</option>
                <option value="conventional">เกษตรเดิม</option>
                <option value="integrated">เกษตรผสมผสาน</option>
                <option value="hydroponic">ไฮโดรโปนิกส์</option>
              </select>
            </div>
            <div class="md:col-span-2">
              <label class="block text-sm font-medium text-gray-700 mb-2">ที่อยู่ไร่ *</label>
              <textarea
                x-model="farm.location"
                rows="3"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
                placeholder="เช่น เลขที่ 456 หมู่ 7 ตำบลคลองหนึ่ง อำเภอคลองหลวง จังหวัดปทุมธานี 12120"
              ></textarea>
            </div>
            <div class="md:col-span-2">
              <label class="block text-sm font-medium text-gray-700 mb-2">คำอธิบายเพิ่มเติม</label>
              <textarea
                x-model="farm.description"
                rows="3"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"
                placeholder="อธิบายเกี่ยวกับวิธีการเกษตร เครื่องมือที่ใช้ ปัญหาที่พบ หรือข้อมูลอื่น ๆ ที่เกี่ยวข้อง"
              ></textarea>
            </div>
          </div>

          <div class="flex justify-between mt-8">
            <button
              @click="prevStep()"
              class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
            >
              ย้อนกลับ
            </button>
            <button
              @click="nextStep()"
              :disabled="!isStep2Valid()"
              class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"
            >
              ถัดไป
            </button>
          </div>
        </div>
      </div>

      <!-- Step 3: Payment Phase 1 -->
      <div x-show="currentStep === 3" class="fade-in">
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6 card-hover">
          <h2 class="text-xl font-semibold mb-6 flex items-center">
            <svg
              class="w-6 h-6 text-green-500 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"
              />
            </svg>
            ชำระค่าการยื่นคำขอ (เฟส 1)
          </h2>

          <!-- Payment Summary -->
          <div class="bg-gradient-to-r from-blue-50 to-green-50 rounded-lg p-6 mb-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">รายละเอียดค่าใช้จ่าย</h3>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-gray-600">ค่าธรรมเนียมตรวจสอบเอกสาร</span>
                <span class="font-semibold">5,000 บาท</span>
              </div>
              <hr class="border-gray-300" />
              <div class="flex justify-between items-center text-lg font-bold">
                <span class="text-gray-800">รวมทั้งสิ้น (เฟส 1)</span>
                <span class="text-green-600">5,000 บาท</span>
              </div>
              <div class="text-sm text-gray-600 mt-2">
                <p>• ค่าธรรมเนียมเฟส 2: 25,000 บาท (ชำระหลังเอกสารผ่านการตรวจสอบ)</p>
                <p>• ค่าธรรมเนียมออกใบรับรอง: 2,000 บาท (ชำระเมื่อผ่านการตรวจภาคสนาม)</p>
                <p class="font-semibold text-green-700">รวมทั้งหมด: 32,000 บาท</p>
              </div>
            </div>
          </div>

          <!-- Payment Methods -->
          <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">เลือกวิธีการชำระเงิน</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <label
                class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors"
              >
                <input
                  type="radio"
                  name="payment_method"
                  value="credit_card"
                  class="form-radio text-blue-600 mr-3"
                />
                <div class="flex items-center">
                  <svg
                    class="w-6 h-6 text-blue-600 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
                    />
                  </svg>
                  <span class="font-medium">บัตรเครดิต/เดบิต</span>
                </div>
              </label>

              <label
                class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-green-50 transition-colors"
              >
                <input
                  type="radio"
                  name="payment_method"
                  value="internet_banking"
                  class="form-radio text-green-600 mr-3"
                />
                <div class="flex items-center">
                  <svg
                    class="w-6 h-6 text-green-600 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"
                    />
                  </svg>
                  <span class="font-medium">Internet Banking</span>
                </div>
              </label>

              <label
                class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-purple-50 transition-colors"
              >
                <input
                  type="radio"
                  name="payment_method"
                  value="mobile_banking"
                  class="form-radio text-purple-600 mr-3"
                />
                <div class="flex items-center">
                  <svg
                    class="w-6 h-6 text-purple-600 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"
                    />
                  </svg>
                  <span class="font-medium">Mobile Banking</span>
                </div>
              </label>

              <label
                class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-orange-50 transition-colors"
              >
                <input
                  type="radio"
                  name="payment_method"
                  value="qr_code"
                  class="form-radio text-orange-600 mr-3"
                />
                <div class="flex items-center">
                  <svg
                    class="w-6 h-6 text-orange-600 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"
                    />
                  </svg>
                  <span class="font-medium">QR Code / PromptPay</span>
                </div>
              </label>
            </div>
          </div>

          <!-- Payment Info -->
          <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
            <div class="flex items-start">
              <svg
                class="w-5 h-5 text-yellow-600 mt-0.5 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
              <div>
                <h4 class="font-medium text-yellow-800">ข้อมูลสำคัญ</h4>
                <p class="text-sm text-yellow-700 mt-1">
                  การชำระเงินเฟส 1 นี้เพื่อให้เจ้าหน้าที่เริ่มตรวจสอบเอกสารของท่าน
                  หากเอกสารไม่ผ่านการตรวจสอบ จะได้รับเงินคืน 70% ภายใน 7 วันทำการ
                </p>
              </div>
            </div>
          </div>

          <div class="flex justify-between mt-8">
            <button
              @click="prevStep()"
              class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
            >
              ย้อนกลับ
            </button>
            <button
              @click="processPayment()"
              class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
            >
              ดำเนินการชำระเงิน
            </button>
          </div>
        </div>
      </div>

      <!-- Step 4: Document Upload -->
      <div x-show="currentStep === 4" class="fade-in">
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6 card-hover">
          <h2 class="text-xl font-semibold mb-6 flex items-center">
            <svg
              class="w-6 h-6 text-green-500 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
              />
            </svg>
            อัปโหลดเอกสารหลักฐาน
          </h2>

          <!-- Payment Success Alert -->
          <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
            <div class="flex items-center">
              <svg
                class="w-5 h-5 text-green-600 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
              <span class="text-green-800 font-medium"
                >ชำระเงินเฟส 1 เรียบร้อยแล้ว - หมายเลขอ้างอิง: PAY2025001234</span
              >
            </div>
          </div>

          <div class="space-y-6">
            <!-- Document Upload Areas -->
            <template x-for="(doc, index) in documents" :key="index">
              <div
                class="border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-green-400 transition-colors"
              >
                <div class="text-center">
                  <div
                    class="mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4"
                  >
                    <svg
                      class="w-6 h-6 text-green-600"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                      />
                    </svg>
                  </div>
                  <h3 class="text-lg font-medium text-gray-900 mb-2" x-text="doc.title"></h3>
                  <p class="text-sm text-gray-500 mb-4" x-text="doc.description"></p>

                  <div x-show="!doc.uploaded">
                    <button
                      @click="uploadDocument(index)"
                      class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700"
                    >
                      <svg
                        class="w-4 h-4 mr-2"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                        />
                      </svg>
                      เลือกไฟล์
                    </button>
                  </div>

                  <div x-show="doc.uploaded" class="text-green-600">
                    <svg
                      class="w-8 h-8 mx-auto mb-2"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                      />
                    </svg>
                    <p class="text-sm font-medium">อัปโหลดเรียบร้อยแล้ว</p>
                    <p class="text-xs" x-text="doc.fileName"></p>
                  </div>
                </div>
              </div>
            </template>
          </div>

          <div class="flex justify-between mt-8">
            <button
              @click="prevStep()"
              class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
            >
              ย้อนกลับ
            </button>
            <button
              @click="nextStep()"
              :disabled="!isStep3Valid()"
              class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"
            >
              ถัดไป
            </button>
          </div>
        </div>
      </div>

      <!-- Step 5: Payment Phase 2 -->
      <div x-show="currentStep === 5" class="fade-in">
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6 card-hover">
          <h2 class="text-xl font-semibold mb-6 flex items-center">
            <svg
              class="w-6 h-6 text-green-500 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"
              />
            </svg>
            ชำระค่าการตรวจรับรอง (เฟส 2)
          </h2>

          <!-- Document Approval Alert -->
          <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
            <div class="flex items-center">
              <svg
                class="w-5 h-5 text-green-600 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
              <div>
                <span class="text-green-800 font-medium">เอกสารผ่านการตรวจสอบแล้ว!</span>
                <p class="text-green-700 text-sm mt-1">
                  เจ้าหน้าที่ได้ตรวจสอบเอกสารเรียบร้อยแล้ว พร้อมดำเนินการขั้นตอนต่อไป
                </p>
              </div>
            </div>
          </div>

          <!-- Payment Summary for Phase 2 -->
          <div class="bg-gradient-to-r from-blue-50 to-green-50 rounded-lg p-6 mb-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">ค่าใช้จ่ายการตรวจรับรองภาคสนาม</h3>

            <!-- Farm Size Calculation -->
            <div class="bg-white rounded-lg p-4 mb-4">
              <div class="flex justify-between items-center mb-2">
                <span class="text-gray-600">ขนาดไร่ของท่าน</span>
                <span class="font-semibold" x-text="farm.area + ' ไร่'"></span>
              </div>
              <div class="flex justify-between items-center mb-2">
                <span class="text-gray-600">ประเภทการตรวจ</span>
                <span class="font-semibold">การตรวจสอบภาคสนาม</span>
              </div>
            </div>

            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-gray-600">ค่าธรรมเนียมตรวจสอบภาคสนาม</span>
                <span class="font-semibold">25,000 บาท</span>
              </div>
              <hr class="border-gray-300" />
              <div class="flex justify-between items-center text-lg font-bold">
                <span class="text-gray-800">รวมทั้งสิ้น (เฟส 2)</span>
                <span class="text-green-600">25,000 บาท</span>
              </div>
              <div class="text-sm text-gray-600 mt-2">
                <p>• รวมค่าใช้จ่ายที่ชำระแล้ว (เฟส 1): 5,000 บาท</p>
                <p>• ค่าธรรมเนียมออกใบรับรอง: 2,000 บาท (ชำระเมื่อผ่านการตรวจ)</p>
                <p class="font-semibold text-green-700">รวมทั้งหมด: 32,000 บาท</p>
              </div>
            </div>
          </div>
          <!-- Inspection Schedule -->
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
            <h4 class="font-medium text-blue-800 mb-2">กำหนดการตรวจสอบภาคสนาม</h4>
            <div class="text-sm text-blue-700">
              <p><strong>วันที่นัดตรวจ:</strong> 15 ตุลาคม 2025 (วันอังคาร)</p>
              <p><strong>เวลา:</strong> 09:00 - 16:00 น.</p>
              <p>
                <strong>ผู้ตรวจ:</strong> ดร.สมหมาย ใจดี (ผู้ตรวจหลัก), นางสาวสุดา รักษ์ดี
                (ผู้ช่วยตรวจ)
              </p>
              <p><strong>รูปแบบ:</strong> ตรวจออนไลน์ผ่าน Video Call + เข้าไร่จริง</p>
            </div>
          </div>

          <!-- Payment Methods Phase 2 -->
          <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">เลือกวิธีการชำระเงิน</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <label
                class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-blue-50 transition-colors"
              >
                <input
                  type="radio"
                  name="payment_method_2"
                  value="credit_card"
                  class="form-radio text-blue-600 mr-3"
                />
                <div class="flex items-center">
                  <svg
                    class="w-6 h-6 text-blue-600 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
                    />
                  </svg>
                  <span class="font-medium">บัตรเครดิต/เดบิต</span>
                </div>
              </label>

              <label
                class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-green-50 transition-colors"
              >
                <input
                  type="radio"
                  name="payment_method_2"
                  value="installment"
                  class="form-radio text-green-600 mr-3"
                />
                <div class="flex items-center">
                  <svg
                    class="w-6 h-6 text-green-600 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"
                    />
                  </svg>
                  <span class="font-medium">ผ่อนชำระ 0% (2 งวด)</span>
                </div>
              </label>

              <label
                class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-purple-50 transition-colors"
              >
                <input
                  type="radio"
                  name="payment_method_2"
                  value="mobile_banking"
                  class="form-radio text-purple-600 mr-3"
                />
                <div class="flex items-center">
                  <svg
                    class="w-6 h-6 text-purple-600 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"
                    />
                  </svg>
                  <span class="font-medium">Mobile Banking</span>
                </div>
              </label>

              <label
                class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-orange-50 transition-colors"
              >
                <input
                  type="radio"
                  name="payment_method_2"
                  value="bank_transfer"
                  class="form-radio text-orange-600 mr-3"
                />
                <div class="flex items-center">
                  <svg
                    class="w-6 h-6 text-orange-600 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"
                    />
                  </svg>
                  <span class="font-medium">โอนเงินผ่านธนาคาร</span>
                </div>
              </label>
            </div>
          </div>

          <!-- Payment Protection -->
          <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
            <div class="flex items-start">
              <svg
                class="w-5 h-5 text-yellow-600 mt-0.5 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
                />
              </svg>
              <div>
                <h4 class="font-medium text-yellow-800">การคุ้มครอง</h4>
                <p class="text-sm text-yellow-700 mt-1">
                  หากไม่ผ่านการตรวจรับรอง จะได้รับเงินคืน 50% ของค่าการตรวจรับรอง
                  (ไม่รวมค่าเดินทางและค่าดำเนินการ) ภายใน 14 วันทำการ
                </p>
              </div>
            </div>
          </div>

          <div class="flex justify-between mt-8">
            <button
              @click="prevStep()"
              class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
            >
              ย้อนกลับ
            </button>
            <button
              @click="processPayment2()"
              class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
            >
              ชำระเงินและยืนยันการนัดหมาย
            </button>
          </div>
        </div>
      </div>

      <!-- Step 6: Review -->
      <div x-show="currentStep === 6" class="fade-in">
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6 card-hover">
          <h2 class="text-xl font-semibold mb-6 flex items-center">
            <svg
              class="w-6 h-6 text-green-500 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
              />
            </svg>
            สรุปรายการและรอการตรวจสอบ
          </h2>

          <!-- Payment Summary -->
          <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6 mb-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">สรุปการชำระเงิน</h3>
            <div class="space-y-2">
              <div class="flex justify-between items-center">
                <span class="text-gray-600">✅ เฟส 1: ค่าการยื่นคำขอ</span>
                <span class="font-semibold text-green-600">1,000 บาท</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-600">✅ เฟส 2: ค่าการตรวจรับรอง</span>
                <span class="font-semibold text-green-600">7,000 บาท</span>
              </div>
              <div class="flex justify-between items-center text-gray-400">
                <span>⏳ เฟส 3: ค่าใบรับรอง (รอผลการตรวจ)</span>
                <span>1,100 บาท</span>
              </div>
              <hr class="border-gray-300" />
              <div class="flex justify-between items-center text-lg font-bold">
                <span class="text-gray-800">รวมที่ชำระแล้ว</span>
                <span class="text-green-600">8,000 บาท</span>
              </div>
            </div>
          </div>

          <div class="space-y-6">
            <!-- Personal Info Review -->
            <div class="bg-gray-50 rounded-lg p-4">
              <h3 class="font-semibold text-gray-800 mb-3">ข้อมูลส่วนตัว</h3>
              <div class="grid grid-cols-2 gap-4 text-sm">
                <div>
                  <span class="font-medium">ชื่อ-นามสกุล:</span> <span x-text="farmer.name"></span>
                </div>
                <div>
                  <span class="font-medium">เลขบัตรประชาชน:</span>
                  <span x-text="farmer.idCard"></span>
                </div>
                <div>
                  <span class="font-medium">วันเกิด:</span> <span x-text="farmer.birthDate"></span>
                </div>
                <div>
                  <span class="font-medium">เบอร์โทร:</span> <span x-text="farmer.phone"></span>
                </div>
                <div class="col-span-2">
                  <span class="font-medium">ที่อยู่:</span> <span x-text="farmer.address"></span>
                </div>
              </div>
            </div>

            <!-- Farm Info Review -->
            <div class="bg-gray-50 rounded-lg p-4">
              <h3 class="font-semibold text-gray-800 mb-3">ข้อมูลไร่</h3>
              <div class="grid grid-cols-2 gap-4 text-sm">
                <div>
                  <span class="font-medium">ชื่อไร่:</span> <span x-text="farm.name"></span>
                </div>
                <div>
                  <span class="font-medium">พื้นที่:</span> <span x-text="farm.area"></span> ไร่
                </div>
                <div>
                  <span class="font-medium">ประเภทพืช:</span>
                  <span x-text="getCropTypeName(farm.cropType)"></span>
                </div>
                <div>
                  <span class="font-medium">ระบบการปลูก:</span>
                  <span x-text="getFarmingSystemName(farm.farmingSystem)"></span>
                </div>
                <div class="col-span-2">
                  <span class="font-medium">ที่อยู่ไร่:</span> <span x-text="farm.location"></span>
                </div>
                <div x-show="farm.description" class="col-span-2">
                  <span class="font-medium">คำอธิบาย:</span> <span x-text="farm.description"></span>
                </div>
              </div>
            </div>

            <!-- Documents Review -->
            <div class="bg-gray-50 rounded-lg p-4">
              <h3 class="font-semibold text-gray-800 mb-3">เอกสารที่อัปโหลด</h3>
              <div class="space-y-2">
                <template x-for="doc in documents" :key="doc.id">
                  <div class="flex items-center justify-between text-sm">
                    <span x-text="doc.title"></span>
                    <span x-show="doc.uploaded" class="text-green-600 flex items-center">
                      <svg
                        class="w-4 h-4 mr-1"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M5 13l4 4L19 7"
                        />
                      </svg>
                      อัปโหลดแล้ว
                    </span>
                  </div>
                </template>
              </div>
            </div>
          </div>

          <div class="flex justify-between mt-8">
            <button
              @click="prevStep()"
              class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
            >
              ย้อนกลับ
            </button>
            <button
              @click="nextStep()"
              class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
            >
              ยืนยันและส่งคำขอ
            </button>
          </div>
        </div>
      </div>

      <!-- Step 7: Confirmation -->
      <div x-show="currentStep === 7" class="fade-in">
        <div class="bg-white rounded-xl shadow-lg p-8 text-center card-hover">
          <div class="animate-bounce-slow">
            <svg
              class="w-16 h-16 text-green-500 mx-auto mb-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>
          </div>
          <h2 class="text-2xl font-bold text-gray-800 mb-4">การดำเนินการเสร็จสมบูรณ์!</h2>
          <p class="text-gray-600 mb-6">
            ขอบคุณที่ใช้บริการระบบ GACP คำขอของท่านอยู่ในขั้นตอนการตรวจสอบ
          </p>

          <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
            <h3 class="font-semibold text-green-800 mb-2">หมายเลขคำขอ</h3>
            <p class="text-2xl font-bold text-green-600" x-text="applicationId"></p>
          </div>

          <!-- Payment Summary -->
          <div class="bg-gray-50 rounded-lg p-4 mb-6">
            <h3 class="font-semibold text-gray-800 mb-3">สรุปการชำระเงิน</h3>
            <div class="space-y-2 text-sm">
              <div class="flex justify-between">
                <span>✅ เฟส 1: ค่าการยื่นคำขอ</span>
                <span class="font-semibold text-green-600">1,000 บาท</span>
              </div>
              <div class="flex justify-between">
                <span>✅ เฟส 2: ค่าการตรวจรับรอง</span>
                <span class="font-semibold text-green-600">7,000 บาท</span>
              </div>
              <hr />
              <div class="flex justify-between font-bold">
                <span>รวมที่ชำระแล้ว</span>
                <span class="text-green-600">8,000 บาท</span>
              </div>
              <div class="flex justify-between text-gray-500">
                <span>คงเหลือ (เฟส 3: ค่าใบรับรอง)</span>
                <span>1,100 บาท</span>
              </div>
            </div>
          </div>

          <div class="space-y-4 text-left mb-8">
            <h3 class="font-semibold text-gray-800">ขั้นตอนต่อไป:</h3>
            <ul class="list-disc list-inside space-y-2 text-gray-600">
              <li>เจ้าหน้าที่ได้รับการชำระเงินเฟส 2 เรียบร้อยแล้ว</li>
              <li><strong>วันที่นัดตรวจ:</strong> 15 ตุลาคม 2025 เวลา 09:00-16:00 น.</li>
              <li>จะได้รับลิงก์ Video Call สำหรับการตรวจออนไลน์ทาง Email</li>
              <li>ผู้ตรวจจะเข้าไร่จริงในช่วงบ่าย (13:00-16:00 น.)</li>
              <li>ผลการตรวจสอบจะแจ้งภายใน 7 วันหลังตรวจเสร็จ</li>
              <li>หากผ่านเกณฑ์ จะชำระเฟส 3 และรับใบรับรอง GACP</li>
            </ul>
          </div>

          <div class="flex justify-center space-x-4">
            <button
              @click="downloadReceipt()"
              class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
            >
              ดาวน์โหลดใบเสร็จ
            </button>
            <button
              @click="resetForm()"
              class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
            >
              ยื่นคำขอใหม่
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      function farmerApp() {
        return {
          currentStep: 1,
          applicationId: '',
          farmer: {
            name: 'นายสมชาย ใจดี',
            idCard: '1-2345-67890-12-3',
            birthDate: '1980-05-15',
            phone: '081-234-5678',
            address: '123 หมู่ 4 ตำบลบางใหญ่ อำเภอบางใหญ่ จังหวัดนนทบุรี 11140',
          },
          farm: {
            name: 'ไร่สมชายออร์แกนิค',
            area: 5.5,
            cropType: 'vegetables',
            farmingSystem: 'organic',
            location: '456 หมู่ 7 ตำบลคลองหนึ่ง อำเภอคลองหลวง จังหวัดปทุมธานี 12120',
            description:
              'ปลูกผักใบเขียวแบบออร์แกนิก ใช้น้ำจากบ่อบาดาล มีระบบสปริงเกลอร์ ไม่ใช้สารเคมี',
          },
          documents: [
            {
              id: 1,
              title: 'สำเนาบัตรประชาชน',
              description: 'สำเนาบัตรประชาชนที่ยังไม่หมดอายุ',
              uploaded: false,
              fileName: '',
            },
            {
              id: 2,
              title: 'หนังสือรับรองการใช้ที่ดิน',
              description: 'โฉนดที่ดิน หรือ ส.ป.ก.4-01 หรือเอกสารการเช่าที่ดิน',
              uploaded: false,
              fileName: '',
            },
            {
              id: 3,
              title: 'แผนที่ไร่',
              description: 'แผนที่แสดงตำแหน่งไร่และขอบเขตพื้นที่',
              uploaded: false,
              fileName: '',
            },
            {
              id: 4,
              title: 'บันทึกการเกษตร',
              description: 'บันทึกการปลูก การใส่ปุ๋ย การเก็บเกี่ยว (ถ้ามี)',
              uploaded: false,
              fileName: '',
            },
          ],

          get progress() {
            return Math.round((this.currentStep / 7) * 100);
          },

          nextStep() {
            if (this.currentStep < 7) {
              this.currentStep++;
              if (this.currentStep === 7) {
                this.generateApplicationId();
              }
            }
          },

          prevStep() {
            if (this.currentStep > 1) {
              this.currentStep--;
            }
          },

          processPayment() {
            // จำลองการชำระเงินเฟส 1 - ค่าตรวจสอบเอกสาร
            setTimeout(() => {
              alert(
                'ชำระเงินเฟส 1 เรียบร้อยแล้ว! จำนวน 5,000 บาท\nรายการ: ค่าธรรมเนียมตรวจสอบเอกสาร\nหมายเลขอ้างอิง: PAY2025001234'
              );
              this.nextStep();
            }, 2000);
          },

          processPayment2() {
            // จำลองการชำระเงินเฟส 2 - ค่าตรวจสอบภาคสนาม
            setTimeout(() => {
              alert(
                'ชำระเงินเฟส 2 เรียบร้อยแล้ว! จำนวน 25,000 บาท\nรายการ: ค่าธรรมเนียมตรวจสอบภาคสนาม\nหมายเลขอ้างอิง: PAY2025001235\nนัดหมายตรวจไร่: 15 ตุลาคม 2025'
              );
              this.nextStep();
            }, 2000);
          },

          downloadReceipt() {
            alert(
              'กำลังดาวน์โหลดใบเสร็จ PDF...\nรวมการชำระเงิน 2 เฟส: 30,000 บาท\n+ ค่าออกใบรับรอง: 2,000 บาท\nรวมทั้งสิ้น: 32,000 บาท'
            );
          },

          isStep1Valid() {
            return (
              this.farmer.name &&
              this.farmer.idCard &&
              this.farmer.birthDate &&
              this.farmer.phone &&
              this.farmer.address
            );
          },

          isStep2Valid() {
            return (
              this.farm.name &&
              this.farm.area &&
              this.farm.cropType &&
              this.farm.farmingSystem &&
              this.farm.location
            );
          },

          isStep3Valid() {
            return this.documents.filter(doc => doc.uploaded).length >= 2;
          },

          uploadDocument(index) {
            // Simulate file upload
            const fileNames = [
              'บัตรประชาชน_สมชาย.pdf',
              'โฉนดที่ดิน_123456.pdf',
              'แผนที่ไร่_สมชาย.jpg',
              'บันทึกการเกษตร_2024.xlsx',
            ];

            setTimeout(() => {
              this.documents[index].uploaded = true;
              this.documents[index].fileName = fileNames[index];
            }, 1000);
          },

          generateApplicationId() {
            const prefix = 'GACP';
            const year = new Date().getFullYear();
            const randomNum = Math.floor(Math.random() * 10000)
              .toString()
              .padStart(4, '0');
            this.applicationId = `${prefix}${year}${randomNum}`;
          },

          getCropTypeName(type) {
            const types = {
              rice: 'ข้าว',
              vegetables: 'ผักใบเขียว',
              fruits: 'ผลไม้',
              herbs: 'สมุนไพร',
              others: 'อื่น ๆ',
            };
            return types[type] || type;
          },

          getFarmingSystemName(system) {
            const systems = {
              organic: 'เกษตรอินทรีย์',
              conventional: 'เกษตรเดิม',
              integrated: 'เกษตรผสมผสาน',
              hydroponic: 'ไฮโดรโปนิกส์',
            };
            return systems[system] || system;
          },

          printApplication() {
            window.print();
          },

          resetForm() {
            this.currentStep = 1;
            this.applicationId = '';
            this.farmer = {
              name: '',
              idCard: '',
              birthDate: '',
              phone: '',
              address: '',
            };
            this.farm = {
              name: '',
              area: '',
              cropType: '',
              farmingSystem: '',
              location: '',
              description: '',
            };
            this.documents.forEach(doc => {
              doc.uploaded = false;
              doc.fileName = '';
            });
          },
        };
      }
    </script>
  </body>
</html>
